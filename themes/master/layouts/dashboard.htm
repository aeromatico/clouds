description = "Dashboard layout with collapsible sidebar"

[session]
security = "user"
redirect = "login"
checkToken = 0

[vite]

[cart]
==
<!DOCTYPE html>
<html lang="es" x-data="{ theme: $store.theme.current }" :data-theme="$store.theme.current">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="dark light">

    <!-- SEO Meta Tags -->
    {% partial 'seo-meta-tags' %}

    <!-- PWA Meta Tags -->
    {% partial 'pwa-meta-tags' %}

    <!-- Vite Assets -->
    {{ vite_client() | raw }}
    {{ vite_entry_tags('js/app.js') | raw }}

    {% styles %}
</head>
<body class="antialiased bg-base-200 overflow-x-hidden" x-cloak>
    <div x-data="dashboard" class="min-h-screen overflow-x-hidden">
        <!-- Mobile Drawer -->
        <div class="lg:hidden">
            <input
                type="checkbox"
                id="mobile-drawer"
                class="drawer-toggle"
                x-model="mobileMenuOpen"
            />

            <div class="drawer">
                <div class="drawer-content flex flex-col">
                    <!-- Mobile Top Bar -->
                    <header class="navbar bg-base-100 border-b border-base-300 sticky top-0 z-20">
                        <div class="flex-none">
                            <label for="mobile-drawer" @click="toggleMobileMenu()" class="btn btn-square btn-ghost">
                                <i class="fas fa-bars text-lg"></i>
                            </label>
                        </div>

                        <div class="flex-1 px-2">
                            <a href="/" class="flex items-center gap-2">
                                <div class="w-8 h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center">
                                    <i class="fas fa-cloud text-primary-content text-sm"></i>
                                </div>
                                <span class="font-bold text-lg">Clouds</span>
                            </a>
                        </div>

                        <div class="flex-none gap-2">
                            <!-- Shopping Cart Badge -->
                            {% partial 'cart::badge' %}

                            <button @click="$store.theme.toggle()" class="btn btn-ghost btn-circle btn-sm">
                                <i :class="$store.theme.isDark ? 'fa-sun' : 'fa-moon'" class="fas"></i>
                            </button>

                            <div class="dropdown dropdown-end">
                                <button tabindex="0" class="btn btn-ghost btn-circle avatar">
                                    <div class="w-8 rounded-full bg-primary flex items-center justify-center">
                                        <span class="text-primary-content text-xs font-bold">{{ user.name|slice(0, 1)|upper }}</span>
                                    </div>
                                </button>
                                <ul tabindex="0" class="menu dropdown-content z-[1] p-2 shadow bg-base-100 rounded-box w-52 mt-3">
                                    <li><a href="/dashboard/profile"><i class="fas fa-user"></i> Mi Perfil</a></li>
                                    <li><a href="javascript:void(0)" data-request="session::onLogout" data-request-data="redirect: '/'" class="text-error"><i class="fas fa-sign-out-alt"></i> Salir</a></li>
                                </ul>
                            </div>
                        </div>
                    </header>

                    <!-- Mobile Page Content -->
                    <main class="flex-grow p-4">
                        {% page %}
                    </main>
                </div>

                <!-- Mobile Drawer Side -->
                <div class="drawer-side z-30">
                    <label for="mobile-drawer" @click="closeMobileMenu()" class="drawer-overlay"></label>
                    <aside class="bg-base-100 min-h-full w-80">
                        <div class="p-4 border-b border-base-300">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center">
                                    <i class="fas fa-cloud text-primary-content"></i>
                                </div>
                                <span class="text-xl font-bold">Clouds Dashboard</span>
                            </div>
                        </div>

                        <ul class="menu p-4">
                            <li><a href="/dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                            <li><a href="/shop"><i class="fas fa-store"></i> Comprar servicios</a></li>

                            <li class="menu-title mt-4"><span>Mis Servicios</span></li>
                            <li><a href="/dashboard/clouds"><i class="fas fa-server"></i> Servicios</a></li>
                            <li><a href="/dashboard/domains"><i class="fas fa-globe"></i> Dominios</a></li>

                            <li class="menu-title mt-4"><span>Cuenta</span></li>
                            <li><a href="/dashboard/invoices"><i class="fas fa-file-invoice"></i> Mis recibos</a></li>
                            <li><a href="/dashboard/billing"><i class="fas fa-credit-card"></i> Facturación</a></li>
                            <li><a href="/dashboard/support"><i class="fas fa-headset"></i> Soporte</a></li>
                            <li><a href="/dashboard/profile"><i class="fas fa-user"></i> Mi Perfil</a></li>
                            <li><a href="/dashboard/settings"><i class="fas fa-cog"></i> Configuración</a></li>
                        </ul>
                    </aside>
                </div>
            </div>
        </div>

        <!-- Desktop Layout -->
        <div class="hidden lg:flex h-screen overflow-hidden max-w-full">
            <!-- Desktop Sidebar -->
            <aside
                :class="sidebarExpanded ? 'w-64' : 'w-20 hover:w-64'"
                class="bg-base-100 border-r border-base-300 flex flex-col transition-all duration-200 h-screen relative flex-shrink-0 group"
            >
                <!-- Sidebar Header -->
                <div class="h-16 flex items-center justify-center border-b border-base-300 px-4 flex-shrink-0">
                    <template x-if="sidebarExpanded">
                        <a href="/" class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center">
                                <i class="fas fa-cloud text-primary-content"></i>
                            </div>
                            <span class="text-xl font-bold whitespace-nowrap">Clouds</span>
                        </a>
                    </template>
                    <template x-if="!sidebarExpanded">
                        <a href="/" class="w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center">
                            <i class="fas fa-cloud text-primary-content"></i>
                        </a>
                    </template>
                </div>

                <!-- Navigation Menu -->
                <nav class="flex-1 overflow-y-auto py-4 relative" :class="sidebarExpanded ? 'px-2' : 'px-1'">
                    <ul class="menu" :class="sidebarExpanded ? 'p-0' : 'p-0'">
                        <li>
                            <a href="/dashboard">
                                <i class="fas fa-home text-lg" :class="sidebarExpanded ? '' : 'w-full text-center group-hover:w-auto'"></i>
                                <span :class="sidebarExpanded ? '' : 'opacity-0 group-hover:opacity-100'" class="transition-opacity">Inicio</span>
                            </a>
                        </li>
                        <li>
                            <a href="/shop">
                                <i class="fas fa-store text-lg" :class="sidebarExpanded ? '' : 'w-full text-center group-hover:w-auto'"></i>
                                <span :class="sidebarExpanded ? '' : 'opacity-0 group-hover:opacity-100'" class="transition-opacity">Comprar Servicios</span>
                            </a>
                        </li>

                        <!-- Mis Servicios Section -->
                        <li :class="sidebarExpanded ? 'menu-title mt-4' : 'my-2 px-3'">
                            <span x-show="sidebarExpanded">Mis Servicios</span>
                            <div x-show="!sidebarExpanded" class="border-t border-base-300 group-hover:hidden"></div>
                            <span x-show="!sidebarExpanded" class="hidden group-hover:block text-xs">Mis Servicios</span>
                        </li>

                        <li>
                            <a href="/dashboard/clouds">
                                <i class="fas fa-server text-lg" :class="sidebarExpanded ? '' : 'w-full text-center group-hover:w-auto'"></i>
                                <span :class="sidebarExpanded ? '' : 'opacity-0 group-hover:opacity-100'" class="transition-opacity">Servicios</span>
                            </a>
                        </li>
                        <li>
                            <a href="/dashboard/domains">
                                <i class="fas fa-globe text-lg" :class="sidebarExpanded ? '' : 'w-full text-center group-hover:w-auto'"></i>
                                <span :class="sidebarExpanded ? '' : 'opacity-0 group-hover:opacity-100'" class="transition-opacity">Dominios</span>
                            </a>
                        </li>
                        <li>
                            <a href="/dashboard/emails">
                                <i class="fas fa-envelope text-lg" :class="sidebarExpanded ? '' : 'w-full text-center group-hover:w-auto'"></i>
                                <span :class="sidebarExpanded ? '' : 'opacity-0 group-hover:opacity-100'" class="transition-opacity">Complementos</span>
                            </a>
                        </li>

                        <!-- Cuenta Section -->
                        <li :class="sidebarExpanded ? 'menu-title mt-4' : 'my-2 px-3'">
                            <span x-show="sidebarExpanded" class>Mi Cuenta</span>
                            <div x-show="!sidebarExpanded" class="border-t border-base-300 group-hover:hidden"></div>
                            <span x-show="!sidebarExpanded" class="hidden group-hover:block text-xs"Mi Cuenta</span>
                        </li>

                        <li>
                            <a href="/dashboard/invoices">
                                <i class="fas fa-file-invoice text-lg" :class="sidebarExpanded ? '' : 'w-full text-center group-hover:w-auto'"></i>
                                <span :class="sidebarExpanded ? '' : 'opacity-0 group-hover:opacity-100'" class="transition-opacity">Mis Facturas</span>
                            </a>
                        </li>
                        <li>
                            <a href="/dashboard/billing">
                                <i class="fas fa-credit-card text-lg" :class="sidebarExpanded ? '' : 'w-full text-center group-hover:w-auto'"></i>
                                <span :class="sidebarExpanded ? '' : 'opacity-0 group-hover:opacity-100'" class="transition-opacity">Facturación</span>
                            </a>
                        </li>
                        <li>
                            <a href="/dashboard/support">
                                <i class="fas fa-headset text-lg" :class="sidebarExpanded ? '' : 'w-full text-center group-hover:w-auto'"></i>
                                <span :class="sidebarExpanded ? '' : 'opacity-0 group-hover:opacity-100'" class="transition-opacity">Soporte</span>
                            </a>
                        </li>
                        <li>
                            <a href="/dashboard/settings">
                                <i class="fas fa-cog text-lg" :class="sidebarExpanded ? '' : 'w-full text-center group-hover:w-auto'"></i>
                                <span :class="sidebarExpanded ? '' : 'opacity-0 group-hover:opacity-100'" class="transition-opacity">Configuración</span>
                            </a>
                        </li>
                    </ul>
                </nav>

                <!-- Sidebar Footer - Toggle Button -->
                <div class="p-3 border-t border-base-300 flex-shrink-0">
                    <button
                        @click="toggleSidebarExpand()"
                        class="btn btn-sm"
                        :class="sidebarExpanded ? 'btn-ghost w-full' : 'btn-circle btn-ghost mx-auto'"
                    >
                        <i
                            :class="sidebarExpanded ? 'fa-angles-left' : 'fa-angles-right'"
                            class="fas"
                        ></i>
                        <span x-show="sidebarExpanded" x-cloak class="ml-2">Contraer menú</span>
                    </button>
                </div>
            </aside>

            <!-- Main Content Area -->
            <div class="flex-1 flex flex-col h-screen overflow-hidden">
                <!-- Desktop Top Bar -->
                <header class="h-16 bg-base-100 border-b border-base-300 flex-shrink-0">
                    <div class="h-full px-6 flex items-center justify-between">
                        <!-- Search Bar -->
                        <div class="flex-1 max-w-2xl">
                            <label class="input input-bordered flex items-center gap-2">
                                <i class="fas fa-search text-base-content/50"></i>
                                <input type="text" class="grow" placeholder="Buscar servicios, dominios..." />
                            </label>
                        </div>

                        <!-- Right Section -->
                        <div class="flex items-center gap-3 ml-4">
                            <!-- Shopping Cart Badge -->
                            {% partial 'cart::badge' %}

                            <!-- Theme Toggle -->
                            <button @click="$store.theme.toggle()" class="btn btn-ghost btn-circle">
                                <i :class="$store.theme.isDark ? 'fa-sun' : 'fa-moon'" class="fas text-lg"></i>
                            </button>

                            <!-- Notifications -->
                            <div class="dropdown dropdown-end">
                                <button tabindex="0" class="btn btn-ghost btn-circle">
                                    <div class="indicator">
                                        <i class="fas fa-bell text-lg"></i>
                                        <span class="badge badge-xs badge-primary indicator-item"></span>
                                    </div>
                                </button>
                                <div tabindex="0" class="dropdown-content z-[1] card card-compact w-64 p-2 shadow bg-base-100 mt-3">
                                    <div class="card-body">
                                        <span class="font-bold text-lg">Notificaciones</span>
                                        <span class="text-base-content/70">No hay notificaciones nuevas</span>
                                    </div>
                                </div>
                            </div>

                            <!-- User Menu -->
                            <div class="dropdown dropdown-end">
                                <button tabindex="0" class="btn btn-ghost btn-circle avatar">
                                    <div class="w-10 rounded-full bg-primary flex items-center justify-center">
                                        <span class="text-primary-content font-bold">{{ user.name|slice(0, 1)|upper }}</span>
                                    </div>
                                </button>
                                <ul tabindex="0" class="menu dropdown-content z-[1] p-2 shadow bg-base-100 rounded-box w-52 mt-3">
                                    <li><a href="/dashboard/profile"><i class="fas fa-user"></i> Mi Perfil</a></li>
                                    <li><a href="/dashboard/settings"><i class="fas fa-cog"></i> Configuración</a></li>
                                    <li class="border-t border-base-300 mt-2 pt-2">
                                        <a href="javascript:void(0)" data-request="session::onLogout" data-request-data="redirect: '/'" class="text-error"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Desktop Page Content -->
                <main class="flex-1 overflow-y-auto overflow-x-hidden p-6">
                    {% page %}
                </main>
            </div>
        </div>
    </div>

    <!-- Toast Notifications Container -->
    <div x-data="toastContainer" class="fixed top-4 right-4 z-[9999] flex flex-col gap-2 max-w-md">
        <template x-for="notification in notifications" :key="notification.id">
            <div
                x-show="notification"
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 transform translate-x-8"
                x-transition:enter-end="opacity-100 transform translate-x-0"
                x-transition:leave="transition ease-in duration-200"
                x-transition:leave-start="opacity-100"
                x-transition:leave-end="opacity-0"
                class="alert shadow-2xl min-w-[320px] border-2"
                :class="{
                    'alert-success bg-success text-success-content border-success': notification.type === 'success',
                    'alert-error bg-error text-error-content border-error': notification.type === 'error',
                    'alert-warning bg-warning text-warning-content border-warning': notification.type === 'warning',
                    'alert-info bg-info text-info-content border-info': notification.type === 'info'
                }"
            >
                <div class="flex items-center gap-3 flex-1">
                    <i class="fas text-xl"
                       :class="{
                           'fa-check-circle': notification.type === 'success',
                           'fa-exclamation-circle': notification.type === 'error',
                           'fa-exclamation-triangle': notification.type === 'warning',
                           'fa-info-circle': notification.type === 'info'
                       }"
                    ></i>
                    <span class="font-semibold" x-text="notification.message"></span>
                </div>
                <div class="flex gap-2">
                    <template x-if="notification.type === 'success' && notification.message.includes('carrito')">
                        <a href="/cart" class="btn btn-sm btn-ghost">
                            <i class="fas fa-shopping-cart mr-1"></i>
                            Ver Carrito
                        </a>
                    </template>
                    <button @click="remove(notification.id)" class="btn btn-sm btn-ghost btn-circle">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </template>
    </div>

    <!-- PWA Install Prompt -->
    {% partial 'pwa-install-prompt' %}

    <!-- October CMS AJAX Framework -->
    {% framework extras %}
    {% scripts %}
</body>
</html>